<!--{%extends "base-layout.twig"%}-->
<!--{%block header_css%}-->
<link rel="stylesheet" href="/static/css/plugins/tagsinput/jquery.tagsinput.css">
<!--{%endblock%}-->
<!--{%block main_content%}-->
<div class="row-fluid">
    <div class="span12">
        <div class="box">
            <div class="box-title">
                <h3><i class="icon-edit"></i>保存直播</h3>
            </div>
            <div class="box-content">
                <form id="form_video" action="<!--{{url('yxvl_eSports/VltvLive/save')}}-->" method="POST" class='form-horizontal form-validate' enctype="multipart/form-data">
                    <div class="control-group">
                        <label class="control-label">标题</label>
                        <div class="controls">
                            <input type="text" name="title" class="input" value="<!--{{data.title}}-->" />
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="control-group">
                            <label class="control-label">展示类型</label>
                            <div class="controls taskType">
                                <!--{{form_radio('type',1,data.type==1)}}-->图片
                                <!--{{form_radio('type',2,data.type==2)}}-->视频
                                <!--{{form_radio('type',3,data.type==3)}}-->直播
                            </div>
                        </div>
                    </div>

                    <div class="control-group img">
                        <label class="control-label">上传图片</label>
                        <div class="controls">
                            <div data-provides="fileupload" class="fileupload fileupload-new">
                                <div style="max-width: 60px; max-height: 60px;" class="fileupload-new thumbnail">
                                    <img id="selected_game_icon" src="<!--{{data.imgMax|default('/static/img/wu_ss.gif')}}-->">
                                </div>
                                <div style="max-width: 60px; max-height: 60px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                            <span class="btn btn-file"><i class="icon-picture"></i>
                                <span class="fileupload-new">选择照片</span><span class="fileupload-exists">Change</span>
                                <input id="task_img" name="img" type="hidden" value="<!--{{data.imgMax}}-->"/>
                                <input type="file"  name="picUrl" >
                            </span>
                                <a data-dismiss="fileupload" class="btn fileupload-exists" href="#">Remove</a>
                                <span style="color: rgb(185, 74, 72);" class="img_note" hidden="hidden">图片不能为空且限于png,gif,jpeg,jpg格式</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-group img">
                        <label class="control-label">跳转链接<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="linkUrl" class="input-xxlarge"><!--{{data.linkUrl}}--></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="control-group link">
                        <label class="control-label">视频代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="content" class="input-xxlarge"><!--{{data.content}}--></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">anroid视频播放代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="videoContentAndroid" class="input-xxlarge"><!--{{data.videoContentAndroid}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">ios视频播放代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="videoContentIos" class="input-xxlarge"><!--{{data.videoContentIos}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">微信视频播放代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="videoContentWechat" class="input-xxlarge"><!--{{data.videoContentWechat}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">默认视频播放代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="videoContentFallback" class="input-xxlarge"><!--{{data.videoContentFallback}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Android直播代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="liveContentAndroid" class="input-xxlarge"><!--{{data.liveContentAndroid}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">ios直播代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="liveContentIos" class="input-xxlarge"><!--{{data.liveContentIos}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">微信直播代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="liveContentWechat" class="input-xxlarge"><!--{{data.liveContentWechat}}--></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">默认直播代码<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="liveContentFallback" class="input-xxlarge"><!--{{data.liveContentFallback}}--></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">列表图片</label>
                        <div class="controls">
                            <div data-provides="fileupload" class="fileupload fileupload-new">
                                <div style="max-width: 60px; max-height: 60px;" class="fileupload-new thumbnail">
                                    <img id="selected_game_icon" src="<!--{{data.imgUrl|default('/static/img/wu_ss.gif')}}-->">
                                </div>
                                <div style="max-width: 60px; max-height: 60px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                            <span class="btn btn-file"><i class="icon-picture"></i>
                                <span class="fileupload-new">选择照片</span><span class="fileupload-exists">Change</span>
                                <input id="task_img2" name="list_img" type="hidden" value="<!--{{data.imgUrl}}-->"/>
                                <input type="file"  name="list_img_file" >
                            </span>
                                <a data-dismiss="fileupload" class="btn fileupload-exists" href="#">Remove</a>
                                <span style="color: rgb(185, 74, 72);" class="img_note" hidden="hidden">图片不能为空且限于png,gif,jpeg,jpg格式</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">分享图片</label>
                        <div class="controls">
                            <div data-provides="fileupload" class="fileupload fileupload-new">
                                <div style="max-width: 60px; max-height: 60px;" class="fileupload-new thumbnail">
                                    <img id="selected_game_icon" src="<!--{{data.shareImg|default('/static/img/wu_ss.gif')}}-->">
                                </div>
                                <div style="max-width: 60px; max-height: 60px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                            <span class="btn btn-file"><i class="icon-picture"></i>
                                <span class="fileupload-new">选择照片</span><span class="fileupload-exists">Change</span>
                                <input id="task_img2" name="img2" type="hidden" value="<!--{{data.shareImg}}-->"/>
                                <input type="file"  name="picUrl2" >
                            </span>
                                <a data-dismiss="fileupload" class="btn fileupload-exists" href="#">Remove</a>
                                <span style="color: rgb(185, 74, 72);" class="img_note" hidden="hidden">图片不能为空且限于png,gif,jpeg,jpg格式</span>
                            </div>
                        </div>
                    </div>



                    <div class="control-group">
                        <label class="control-label">简介<i class="tip-star"></i></label>
                        <div class="controls">
                            <div class=" input-append">
                                <textarea name="summary" class="input-xxlarge"><!--{{data.summary}}--></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">作者</label>
                        <div class="controls">
                            <input type="text" name="author" class="input" value="<!--{{data.author}}-->" />
                        </div>
                    </div>

                    <div class="row-fluid time">
                        <div class="span4">
                            <div class="control-group">
                                <label class="control-label">开始时间</label>
                                <div class="controls">
                                    <div class="input-append date">
                                        <input name="startTime" type="text" class="input-medium datetimepicker"  value="<!--{{data.startTime|date('Y-m-d H:i')}}-->" >
                                        <span class="add-on"><i class="icon-calendar"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="span4">
                            <div class="control-group">
                                <label class="control-label">结束时间</label>
                                <div class="controls">
                                    <div class="input-append date">
                                        <input name="endTime" type="text" class="input-medium datetimepicker" value="<!--{{data.endTime|date('Y-m-d H:i')}}-->" >
                                        <span class="add-on"><i class="icon-calendar"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">关键字</label>
                        <div class="controls">
                            <div class="span9"><input type="text" name="keyword" id="tags" class="tagsinput " value="<!--{{data.keyword}}-->"></div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">是否开启</label>
                        <div class="controls" style="height: 30px;">
                            <input name="enable" <!--{% if data.enable==1  %}-->checked<!--{% endif %}--> data-on-color="success" data-on-text="开启" data-off-color="danger" data-off-text="关闭" class="switchbox" type="checkbox" />
                        </div>
                    </div>


                    <div class="form-actions">
                        <input type="hidden" name="id" value="<!--{{data.id}}-->"/>
                        <button type="submit" class="btn btn-primary"><i class="icon-ok"></i>保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!--{%endblock%}-->

<!--{%block footer_js%}-->
<script src="<!--{{asset('/static/js/plugins/tagsinput/jquery.tagsinput.min.js')}}-->"></script>
<script src="<!--{{asset('/static/js/plugins/jquery-ui/jquery-ui-1.9.2.custom.min.js')}}-->"></script>
<script>
    $(function(){

        if($(".tagsinput").length > 0){
            $('.tagsinput').tagsInput({width:'auto', height:'auto',autocomplete_url:'<!--{{url('yxvl_eSports/api/tags')}}-->'});
        }

        $('input:radio').iCheck({
            checkboxClass: 'icheckbox_square-orange',
            radioClass: 'iradio_square-orange',
            increaseArea: '20%'
        });

        $('.switchbox').bootstrapSwitch();

        var taskType = "<!--{{data.type|default("1")}}-->";
        check_taskType(taskType);
        $("input[name='type']").on('ifChecked',function(e){
            var check_val = e.currentTarget.value;
            selTaskType = check_val;
            check_taskType(check_val);
        });
        function check_taskType(type){
            switch (type){
                case "1":
                    $(".img").show();
                    $(".link").hide();
                    break;
                default :
                    $(".img").hide();
                    $(".link").show();
            }
        }
    })

    $(function(){
        $('input.datetimepicker').datetimepicker({format:'Y-m-d H:i',lang:'ch'});
    });
</script>
<!--{%endblock%}-->