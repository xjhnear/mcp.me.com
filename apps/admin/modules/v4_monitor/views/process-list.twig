<!--{%extends "sub-layout-shop.twig"%}-->
<!--{%block main_content%}-->
<div class="row-fluid">
	<div class="span12">
		<div class="box box-color box-bordered">
			<div class="box-title">
				<h3>
					<i class="icon-table"></i>
					子接口管理
					<span class="badge badge-warning"><!--{{totalcount}}--></span>
				</h3>
				<div class="actions">
					<form action="<!--{{url('/v4monitor/record/process-list')}}-->">
						<table class="table-filter">
							<tr>
	                            <td>
	                            	<input name="processName"  placeholder="请填写子接口URL" style="width:177px;" type="text" class="input-small" value="<!--{{processName}}-->" >
	                            </td>
	                            <td>
	                            	<input name="baseId"  placeholder="请填写主线程标识" style="width:177px;" type="text" class="input-small" value="<!--{{baseId}}-->" >
	                            </td>
								<td>
									时间
									<div class="input-append date " >
										<input name="addtime" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})" type="text" class="input-medium datetimepicker" id="date_timepicker_start" value="<!--{{addtime}}-->" readonly>
										<span class="add-on"><i class="icon-calendar"></i></span>
									</div>

								</td>
                        	<td><button class="btn btn-teal"><i class="icon-search"></i>搜索</button></td>
                        </tr>
                     </table>
					</form>	
				</div>
			</div>
			<div class="box-content nopadding">
				<table class="table table-hover table-nomargin">
					<thead>
					<tr>
						<!-- <th class="col-60">ID</th> -->
						<th class="col-100">子接口URL</th>
						<th class="col-60">模块</th>
						<th class="col-60">URL类型</th>
						<th class="col-60">执行时间(毫秒)</th>
						<th class="col-80">添加时间</th>
						<th class="col-80">主线程标识</th>
						<th class="table-btn-group">操作</th>
					</tr>
					</thead>
					<tbody>
					<!--{% for key,item in datalist%}-->
					<tr id="tr_<!--{{item.id}}-->" data-id="<!--{{item.urldata}}-->" >
						<td><a href="javascript:;" class="urldata"><!--{{item.processName}}--></a></td>
						<td><!--{{item.module}}--></td>
						<td><!--{{item.urltype}}--></td>
						<td><!--{{item.timeservice}}--></td>
						<td><!--{{item.receiveTime}}--></td>
						<td><a href="<!--{{url('v4monitor/record/detail',{baseId:item.baseId})}}-->"><!--{{item.baseId}}--></a></td>
						<td>

						</td>
					</tr>
					<!--{%endfor%}-->
					</tbody>
				</table>
				<div class="pagelink">
					<!--{{pagelinks}}-->
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    URL数据
                </h4>
            </div>
            <form id="myform" >
                <input type="hidden" name="orderId" id="orderId" value="">
                <div class="modal-body">
                    <div class="box-content">
                        <table class="table"  id="table_from" style="width:50%">
                        </table>
                    </div>
                </div>
            </form>
            <div id="modal-footer" class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">关闭
                </button>
                <a href="javascript:;" id="go_" url="<!--{{url('v4product/order/set',{type:'edit',method:'post'})}}-->" class="btn btn-primary"> 确定</a></div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
    <!--{%endblock%}-->
<!--{%block footer_js%}-->
<script src="/static/js/laydate/laydate.js"></script>
<script src="/static/js/ajaxfileupload.js"></script>
<script>
    $('[data-toggle="popover"]').popover();
	$(function(){		
        $("a.urldata").on('click',function(){
                var tr=$(this).parents("tr"),
                    data=tr.attr('data-id');
                if(data){
                    $("#myModal").modal("show");
                    $("#modal-footer").hide();
                    setHTML(data);
                }else{
                    alertify.error("抱歉，此数据无URL数据");
                }
                return ;
        });
            
	});
        function setHTML(data){
            var html='<body><tr><td>'+data+'</td></tr></body>';
            $("#table_from").html(html);
        }
</script>
<!--{%endblock%}-->